<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="/favicon.ico" type="image/x-icon" />
    <style>
      main {
        padding: 15px;
      }

      main * {
        font-family: Helvetica, sans-serif;
      }
    </style>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Touchpoint prototype</title>
  </head>

  <body>
    <main>
      <h1>Loreum ipsum dolor sit amet</h1>

      <p>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam
        fermentum nisi nec placerat facilisis. Ut fringilla magna ac ipsum
        finibus, vitae scelerisque magna molestie. Donec mollis ut elit a
        tristique. Phasellus tempus velit quam, non tempor dolor tempus a.
        Quisque sed risus tortor. Duis ultricies maximus imperdiet. Vivamus eget
        accumsan nulla. Sed accumsan ipsum in pharetra ornare. In ac scelerisque
        metus. In hac habitasse platea dictumst. Proin est massa, interdum ut
        risus sit amet, congue bibendum dolor. Donec dapibus lacus vel sem
        hendrerit, sit amet placerat odio blandit. Cras laoreet sapien id erat
        ornare, in hendrerit tortor commodo.
      </p>

      <p>
        Nulla porta quis sem id pellentesque. Aenean elit enim, vestibulum vitae
        libero quis, pretium vestibulum nunc. Proin id dolor vulputate, rhoncus
        tellus quis, condimentum mi. Morbi sed varius nisi, sed convallis
        tellus. Cras imperdiet feugiat nisi at tristique. Suspendisse potenti.
        Cras in quam fermentum, laoreet tortor non, euismod leo. Mauris
        tincidunt massa quis malesuada pellentesque. Nulla auctor arcu vel orci
        sodales porttitor.
      </p>

      <p>
        Integer magna mi, consectetur vitae dui tempus, ultricies commodo magna.
        Morbi aliquet varius enim eget ullamcorper. Vestibulum tristique, risus
        eget tincidunt tristique, nibh dolor laoreet purus, id viverra mi ipsum
        eget neque. Lorem ipsum dolor sit amet, consectetur adipiscing elit.
        Vestibulum imperdiet ut ex et convallis. Lorem ipsum dolor sit amet,
        consectetur adipiscing elit. Phasellus auctor eget odio ut dignissim.
        Mauris eget velit ut orci vestibulum bibendum. Vestibulum sit amet
        tincidunt enim.
      </p>

      <p>
        Donec eu mauris ac lectus rutrum blandit ut id ante. Phasellus volutpat
        imperdiet mauris in aliquet. Duis auctor, tellus ac faucibus fermentum,
        ligula quam hendrerit eros, ut vehicula erat mi non nulla. Fusce odio
        massa, fermentum eget metus vitae, interdum viverra justo. Nam consequat
        mauris orci, a rhoncus eros volutpat nec. Nunc iaculis erat efficitur,
        pulvinar eros vel, commodo ligula. Praesent gravida, ipsum vitae tempus
        aliquam, mauris elit pharetra sapien, vitae porttitor quam orci quis
        dolor. Mauris et vulputate enim, et pellentesque libero. Proin cursus
        malesuada condimentum. Donec scelerisque, quam in fringilla facilisis,
        nibh sapien varius justo, eget pellentesque erat leo ac lectus. Nulla eu
        auctor sem. Cras condimentum sem non mauris facilisis imperdiet. Integer
        eu dolor ipsum. Praesent maximus ornare felis, non faucibus sem
        porttitor nec.
      </p>

      <p>
        Orci varius natoque penatibus et magnis dis parturient montes, nascetur
        ridiculus mus. Nunc elementum non urna vel vulputate. Vestibulum vitae
        felis turpis. Cras id mauris id ligula molestie eleifend. Vivamus in
        ante at erat rutrum vulputate vel id arcu. Nam luctus sapien sed
        fermentum fermentum. Ut dolor velit, elementum et metus vel, pretium
        dapibus lectus. Nulla vulputate pulvinar elit quis convallis. Cras
        pharetra, eros sit amet blandit ornare, eros odio accumsan urna, nec
        vestibulum dolor purus nec neque. Phasellus vel quam sed magna vehicula
        facilisis sit amet non risus. Phasellus libero eros, eleifend ut
        vulputate non, malesuada sit amet purus. Etiam vel diam facilisis,
        tempus quam eu, ullamcorper turpis. Duis nec enim ut est rutrum rhoncus.
        Cras finibus urna at purus accumsan, viverra lacinia nunc faucibus. In
        facilisis, ex eu commodo luctus, justo nisl hendrerit quam, quis
        volutpat tellus lectus sit amet enim. Duis laoreet lorem vitae lorem
        aliquam bibendum.
      </p>
    </main>
    <script type="module">
      import { create, html, Icons } from "/src/index.tsx";

      // Example custom modality component for voice
      const ExampleCard = ({ data, conversationHandler }) => {
        return html`
          <div className="bg-accent rounded-inner p-4 text-white shadow-lg">
            <div className="flex items-center gap-2 mb-2">
              <${Icons.Touchpoint} className="w-5 h-5" />
              <span className="font-medium">Voice Modality</span>
            </div>
            <div className="space-y-2">
              <div className="text-sm opacity-90">
                Title: ${data.title || "No title"}
              </div>
              <div className="text-sm opacity-90">
                Message: ${data.message || "No message"}
              </div>
              ${data.showButton
                ? html`
                    <button
                      className="mt-3 px-3 py-1 bg-white text-accent rounded text-sm font-medium hover:bg-gray-100"
                      onClick=${() =>
                        conversationHandler.sendText(
                          "Button clicked from voice modality!",
                        )}
                    >
                      ${data.buttonText || "Click me"}
                    </button>
                  `
                : ""}
            </div>
          </div>
        `;
      };

      // Another example - simple data display
      const DataDisplay = ({ data }) => {
        return html`
          <div
            className="bg-primary-5 rounded-inner p-3 text-primary-80 border-l-4 border-accent"
          >
            <div className="font-medium text-accent mb-1">Data Received</div>
            <pre className="text-xs overflow-auto">
${JSON.stringify(data, null, 2)}</pre
            >
          </div>
        `;
      };

      const config = {
        applicationUrl:
          "https://apps.nlx.ai/c/C8za89Z8bS1cw02DHiXfA/rkq9b2D1RHkM5QDWHbWo5",
        headers: {
          "nlx-api-key": "eYnAnPAcF9ioyU0oH79ByP5VnhXdV9SF",
        },
        userId: "+19208331234",
        languageCode: "en-US",
      };

      config.applicationUrl = config.applicationUrl.replace(
        /(https:\/\/bots\.dev\.studio\.nlx\.ai)|(https:\/\/apps\.nlx\.ai)/,
        "http://localhost:3000",
      );
      const touchpoint = await create({
        config,
        input: "voice",
        // Configure custom modality components
        customModalities: {
          // This will render when roomData contains { "ExampleCard": { ... } }
          ExampleCard,
          // This will render when roomData contains { "DataDisplay": { ... } }
          DataDisplay,
          // You can add more modalities here
        },
      });
      touchpoint.expanded = true;

      // Example: Simulate receiving modality data (for testing)
      // In real usage, this data would come from the voice bot/agent
      setTimeout(() => {
        console.log(
          "To test custom modalities, send data like this from your voice agent:",
        );
        console.log(
          '{ "ExampleCard": { "title": "Hello World", "message": "This is a custom modality!", "showButton": true, "buttonText": "Say Hi" } }',
        );
        console.log(
          '{ "DataDisplay": { "timestamp": "2024-01-01", "status": "active", "count": 42 } }',
        );
      }, 2000);
    </script>
  </body>
</html>
